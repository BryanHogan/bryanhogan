---
const pageTtitle = "Blog Page";

const newsletterReminder = true;
var allPosts = await Astro.glob("../pages/blog/*.md");
allPosts = allPosts.sort((a, b) => {
  let dateA =
    a.frontmatter && a.frontmatter.pubDate
      ? new Date(a.frontmatter.pubDate)
      : new Date(0);
  let dateB =
    b.frontmatter && b.frontmatter.pubDate
      ? new Date(b.frontmatter.pubDate)
      : new Date(0);
  return dateB.getTime() - dateA.getTime();
});

import Button from "../components/Button.astro";
import CardB from "../components/CardB.astro";
import Layout from "../layouts/Layout.astro";
import CompactPostsList from "../components/CompactPostsList.astro"
---

<Layout
  title="Bryan's Blog"
  headerMode="Blog"
  metaDescription="Bryan Hogan's Blog. All about learning, creating and finding balance."
  ogtype="website"
>
  <div class="gradient-background text-shadow intro-section text-align-center">
    <h1>Bryan's Blog</h1>
    <p>About learning, creating and finding balance.</p>
    <Button
      link="/follow"
      text="Join The Newsletter"
      targetText=""
      buttonStyle="transparent-bright small inset-dark-shadow"
    />
  </div>
  <div class="sub-nav-section">
    <a href="/about">About</a>
    <a href="/blog-compact">Compact View</a>
    <a href="/tags">Tag Overview</a>
    <a href="/rss.xml"><img src="../icons/RSS-Icon.svg" height="18" width="18" alt="RSS Icon" title="See RSS Feed"></a>

  </div>
  <ul class="posts-container">
    {
      allPosts.map((post) => (
        <li class="post">
          <CardB
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            ahref={post.url}
            coverURL={post.frontmatter.coverImage.url}
            transition:name={post.frontmatter.coverImage.url}
            coverALT={post.frontmatter.coverImage.alt}
            coverWidth={post.frontmatter.coverImage.width}
            coverHeight={post.frontmatter.coverImage.height}
            tag={post.frontmatter.tags[0]}
            length={post.frontmatter.length}
            postURL={post.url}
          />
        </li>
      ))
    }
  </ul>
</Layout>

<style>
  .sub-nav-section {
    display: flex;
    justify-content: center;
    max-width: 550px;
    margin-inline: auto;
    & a {
      color: var(--color-main-dark-30);
      font-size: 0.8rem;
      padding-top: 10px;
      padding-inline: 3%;
      text-decoration: none;
      transition: all 300ms;
      filter: brightness(0) saturate(100%) invert(57%) sepia(6%) saturate(183%)
        hue-rotate(169deg) brightness(92%) contrast(92%);
      &:hover {
        transition: all 200ms;
        filter: brightness(0) saturate(100%) invert(86%) sepia(2%)
          saturate(892%) hue-rotate(187deg) brightness(114%) contrast(88%);
      }
      & img {
        height: 80%;
        width: auto;
      }
    }
  }
  .intro-section {
    min-height: 300px;
    height: 45vh;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    & h1 {
      margin: 30px;
      margin-top: 50px;
    }
    & p {
      margin-bottom: 20px;
    }
  }
  .posts-container {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    align-items: flex-start;
    list-style: none;
    max-width: 2200px;
    & li {
      max-width: 400px;
      width: 90%;
      margin: 10px;
      margin-block: 40px;
    }
  }
  @media only screen and (min-width: 699px) {
    .posts-container li {
      margin-inline: 30px;
    }
  }
</style>
